<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calculateur de baies non protégées - CCQ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: 20px auto;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .nav-bar {
      background-color: #003087;
      color: white;
      padding: 10px;
      text-align: center;
      font-weight: bold;
      font-size: 18px;
    }
    .tabs {
      display: flex;
      justify-content: space-around;
      background-color: #E8ECEF;
      padding: 10px 0;
    }
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      color: #333;
      font-weight: bold;
    }
    .tab.active {
      background-color: #fff;
      border-bottom: 2px solid #003087;
    }
    .content {
      display: flex;
      padding: 20px;
    }
    .left-column {
      width: 50%;
      padding: 10px;
      border-right: 1px solid #ccc;
    }
    .right-column {
      width: 50%;
      padding: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #E8ECEF;
      color: #555;
      font-size: 16px;
      text-align: center;
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    .form-group input, .form-group select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }
    .btn {
      width: 100%;
      padding: 10px;
      background-color: #003087;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    .highlight {
      color: #007bff;
      font-weight: bold;
    }
    .details {
      margin-top: 10px;
      font-size: 0.9em;
      color: #555;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="nav-bar">Calculateur de baies non protégées</div>
    <div class="tabs">
      <div class="tab active" onclick="showTab('general')">Général</div>
      <div class="tab" onclick="showTab('batiments')">Bâtiments</div>
      <div class="tab" onclick="showTab('maisons')">Maisons</div>
    </div>
    <div class="content">
      <!-- Onglet Général -->
      <div class="left-column tab-content active" id="general">
        <h3>Calcul basé sur la section 3.2.3 du CCQ</h3>
        <div class="form-group">
          <label for="usage-general">Usage du bâtiment :</label>
          <select id="usage-general">
            <option value="habitation">Habitation</option>
            <option value="affaires">Affaires</option>
            <option value="commercial">Commercial</option>
            <option value="industriel">Industriel</option>
          </select>
        </div>
        <div class="form-group">
          <label for="gicleurs-general">Protection par gicleurs :</label>
          <input type="checkbox" id="gicleurs-general">
        </div>
        <div class="form-group">
          <label for="distance-general">Distance limitative (m) :</label>
          <input type="number" id="distance-general" step="0.1" required>
        </div>
        <div class="form-group">
          <label for="surface-general">Surface de la façade (m²) :</label>
          <input type="number" id="surface-general" step="0.1" required>
        </div>
        <div class="form-group">
          <label for="rapport-general">Rapport L/H ou H/L :</label>
          <select id="rapport-general">
            <option value="inf3">Moins de 3:1</option>
            <option value="3a5">3:1 à 5:1</option>
            <option value="sup5">Plus de 5:1</option>
          </select>
        </div>
        <div class="form-group">
          <label for="intervention-general">Délai d'intervention :</label>
          <input type="checkbox" id="intervention-general"> Plus de 10 min dans ≥ 10 % des cas
        </div>
        <button class="btn" onclick="calculer('general')">Calculer</button>
      </div>

      <!-- Onglet Bâtiments -->
      <div class="left-column tab-content" id="batiments">
        <h3>Calcul basé sur la section 9.10.14 du CCQ</h3>
        <div class="form-group">
          <label for="usage-batiments">Type de bâtiment :</label>
          <select id="usage-batiments">
            <option value="commercial">Commercial</option>
            <option value="industriel">Industriel</option>
          </select>
        </div>
        <div class="form-group">
          <label for="distance-batiments">Distance limitative (m) :</label>
          <input type="number" id="distance-batiments" step="0.1" required>
        </div>
        <div class="form-group">
          <label for="surface-batiments">Surface exposée (m²) :</label>
          <input type="number" id="surface-batiments" step="0.1" required>
        </div>
        <button class="btn" onclick="calculer('batiments')">Calculer</button>
      </div>

      <!-- Onglet Maisons -->
      <div class="left-column tab-content" id="maisons">
        <h3>Calcul basé sur la section 9.10.15 du CCQ</h3>
        <div class="form-group">
          <label for="etages-maisons">Nombre d'étages :</label>
          <input type="number" id="etages-maisons" min="1" required>
        </div>
        <div class="form-group">
          <label for="distance-maisons">Distance limitative (m) :</label>
          <input type="number" id="distance-maisons" step="0.1" required>
        </div>
        <div class="form-group">
          <label for="surface-maisons">Surface de la façade (m²) :</label>
          <input type="number" id="surface-maisons" step="0.1" required>
        </div>
        <button class="btn" onclick="calculer('maisons')">Calculer</button>
      </div>

      <!-- Zone des résultats -->
      <div class="right-column" id="resultats">
        Les résultats s'afficheront ici après le calcul
      </div>
    </div>
  </div>

  <script>
    // Gestion des onglets
    function showTab(tabId) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      document.querySelector(`[onclick="showTab('${tabId}')"]`).classList.add('active');
      document.getElementById(tabId).classList.add('active');
      document.getElementById('resultats').innerHTML = "Les résultats s'afficheront ici après le calcul";
    }

    // Fonction de calcul générique
    function calculer(tab) {
      let pourcentage, surfaceMax, resultat;
      const resultatsDiv = document.getElementById('resultats');

      if (tab === 'general') {
        const usage = document.getElementById('usage-general').value;
        const gicleurs = document.getElementById('gicleurs-general').checked;
        let distance = parseFloat(document.getElementById('distance-general').value);
        const surface = parseFloat(document.getElementById('surface-general').value);
        const rapport = document.getElementById('rapport-general').value;
        const intervention = document.getElementById('intervention-general').checked;

        // Ajustement si délai d'intervention > 10 min
        if (intervention && !gicleurs) distance /= 2;

        // Exemple de calcul simplifié (à remplacer par les données réelles du CCQ)
        pourcentage = distance < 1.2 ? 10 : distance < 2 ? 20 : 30;
        if (gicleurs) pourcentage *= 2;
        surfaceMax = (pourcentage / 100) * surface;

        resultat = `
          <strong>Résultats (Général) :</strong><br>
          Pourcentage maximal : <span class="highlight">${pourcentage}%</span><br>
          Surface maximale : <span class="highlight">${surfaceMax.toFixed(2)} m²</span>
          <div class="details">
            - Usage : ${usage}<br>
            - Distance : ${distance} m${intervention && !gicleurs ? ' (ajustée)' : ''}<br>
            - Gicleurs : ${gicleurs ? 'Oui' : 'Non'}
          </div>
        `;
      } else if (tab === 'batiments') {
        const usage = document.getElementById('usage-batiments').value;
        const distance = parseFloat(document.getElementById('distance-batiments').value);
        const surface = parseFloat(document.getElementById('surface-batiments').value);

        // Calcul simplifié pour bâtiments
        pourcentage = distance < 1.5 ? 15 : 25;
        surfaceMax = (pourcentage / 100) * surface;

        resultat = `
          <strong>Résultats (Bâtiments) :</strong><br>
          Pourcentage maximal : <span class="highlight">${pourcentage}%</span><br>
          Surface maximale : <span class="highlight">${surfaceMax.toFixed(2)} m²</span>
          <div class="details">
            - Type : ${usage}<br>
            - Distance : ${distance} m
          </div>
        `;
      } else if (tab === 'maisons') {
        const etages = parseInt(document.getElementById('etages-maisons').value);
        const distance = parseFloat(document.getElementById('distance-maisons').value);
        const surface = parseFloat(document.getElementById('surface-maisons').value);

        // Calcul simplifié pour maisons
        pourcentage = distance < 1 ? 10 : etages > 2 ? 20 : 15;
        surfaceMax = (pourcentage / 100) * surface;

        resultat = `
          <strong>Résultats (Maisons) :</strong><br>
          Pourcentage maximal : <span class="highlight">${pourcentage}%</span><br>
          Surface maximale : <span class="highlight">${surfaceMax.toFixed(2)} m²</span>
          <div class="details">
            - Étages : ${etages}<br>
            - Distance : ${distance} m
          </div>
        `;
      }

      resultatsDiv.innerHTML = resultat;
    }
  </script>
</body>
</html>